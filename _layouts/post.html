---
layout: default
---
<div class="content-wrapper">
  <header id="post-header">
    <p class="muted">[ {{ page.tags | join: ', ' }} ]</p>
    <h1 class="post-title">{{ page.title }}</h1>
    <p class="muted">
      By {{ site.author.name }} <br />
      Published <time>{{ page.date | date_to_string }}</time>
    </p>
  </header>

  <div class="post">
    {{ content }}
  </div>

    {% include share.html %}

    <div class="section-title">
      <h5 class="muted">Read next</h5>
      {% assign RELATED_POSTS_THRESHOLD = 3 %}

      <ul>
        {% assign related_post_count = 0 %}
        {% for post in site.related_posts %}
          {% if related_post_count == RELATED_POSTS_THRESHOLD %}
            {% break %}
          {% endif %}
          {% for tag in post.tags %}
            {% if page.tags contains tag %}
              <li>
                <h2>
                  <a href="{{ site.baseurl }}{{ post.url }}" style="color: #404040">
                    {{ post.title }}
                  </a>
                </h2>
              </li>
              {% assign related_post_count = related_post_count | plus: 1 %}
              {% break %}
            {% endif %}
          {% endfor %}
        {% endfor %}

        {% assign posts_left = RELATED_POSTS_THRESHOLD | minus: related_post_count %}
        {% unless posts_left == 0 %}
          {% for post in site.related_posts %}
            {% if posts_left == 0 %}
              {% break %}
            {% endif %}

            {% assign already_related = false %}
            {% for tag in post.tags %}
              {% if page.tags contains tag %}
                {% assign already_related = true %}
                {% break %}
              {% endif %}
            {% endfor %}
            {% unless already_related %}
              {% assign posts_left = posts_left | minus: 1 %}
              <li>
                <h2>
                  <a href="{{ site.baseurl }}{{ post.url }}" style="color: #404040">
                    {{ post.title }}
                  </a>
                </h2>
              </li>
            {% endunless %}
          {% endfor %}
        {% endunless %}
      </ul>
    </div>
    <!-- Disqus -->
    {% if page.comments and site.author.disqus %}

    <div class="post-disqus">
      {% include disqus.html %}
    </div>
    {% endif %}
  </div>
</div>
